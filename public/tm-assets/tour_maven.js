(()=>{var kt=class{constructor(t,e,n){this.eventTarget=t,this.eventName=e,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){let e=Ge(t);for(let n of this.bindings){if(e.immediatePropagationStopped)break;n.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((t,e)=>{let n=t.index,r=e.index;return n<r?-1:n>r?1:0})}};function Ge(i){if("immediatePropagationStopped"in i)return i;{let{stopImmediatePropagation:t}=i;return Object.assign(i,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}var Et=class{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(t=>t.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(t=>t.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((t,e)=>t.concat(Array.from(e.values())),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,n={}){this.application.handleError(t,`Error ${e}`,n)}clearEventListenersForBinding(t){let e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){let{eventTarget:e,eventName:n,eventOptions:r}=t,o=this.fetchEventListenerMapForEventTarget(e),s=this.cacheKey(n,r);o.delete(s),o.size==0&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){let{eventTarget:e,eventName:n,eventOptions:r}=t;return this.fetchEventListener(e,n,r)}fetchEventListener(t,e,n){let r=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(e,n),s=r.get(o);return s||(s=this.createEventListener(t,e,n),r.set(o,s)),s}createEventListener(t,e,n){let r=new kt(t,e,n);return this.started&&r.connect(),r}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){let n=[t];return Object.keys(e).sort().forEach(r=>{n.push(`${e[r]?"":"!"}${r}`)}),n.join(":")}},Ze={stop({event:i,value:t}){return t&&i.stopPropagation(),!0},prevent({event:i,value:t}){return t&&i.preventDefault(),!0},self({event:i,value:t,element:e}){return t?e===i.target:!0}},Qe=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function tn(i){let e=i.trim().match(Qe)||[],n=e[1],r=e[2];return r&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${r}`,r=""),{eventTarget:en(e[3]),eventName:n,eventOptions:e[6]?nn(e[6]):{},identifier:e[4],methodName:e[5],keyFilter:r}}function en(i){if(i=="window")return window;if(i=="document")return document}function nn(i){return i.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})}function rn(i){if(i==window)return"window";if(i==document)return"document"}function zt(i){return i.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function Ot(i){return zt(i.replace(/--/g,"-").replace(/__/g,"_"))}function J(i){return i.charAt(0).toUpperCase()+i.slice(1)}function le(i){return i.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}function on(i){return i.match(/[^\s]+/g)||[]}var At=class{constructor(t,e,n,r){this.element=t,this.index=e,this.eventTarget=n.eventTarget||t,this.eventName=n.eventName||sn(t)||ct("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||ct("missing identifier"),this.methodName=n.methodName||ct("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=r}static forToken(t,e){return new this(t.element,t.index,tn(t.content),e)}toString(){let t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}isFilterTarget(t){if(!this.keyFilter)return!1;let e=this.keyFilter.split("+"),n=["meta","ctrl","alt","shift"],[r,o,s,a]=n.map(l=>e.includes(l));if(t.metaKey!==r||t.ctrlKey!==o||t.altKey!==s||t.shiftKey!==a)return!0;let c=e.filter(l=>!n.includes(l))[0];return c?(Object.prototype.hasOwnProperty.call(this.keyMappings,c)||ct(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[c].toLowerCase()!==t.key.toLowerCase()):!1}get params(){let t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:n,value:r}of Array.from(this.element.attributes)){let o=n.match(e),s=o&&o[1];s&&(t[zt(s)]=an(r))}return t}get eventTargetName(){return rn(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}},oe={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:i=>i.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function sn(i){let t=i.tagName.toLowerCase();if(t in oe)return oe[t](i)}function ct(i){throw new Error(i)}function an(i){try{return JSON.parse(i)}catch{return i}}var Ct=class{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){this.willBeInvokedByEvent(t)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let t=this.controller[this.methodName];if(typeof t=="function")return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){let{element:e}=this.action,{actionDescriptorFilters:n}=this.context.application,r=!0;for(let[o,s]of Object.entries(this.eventOptions))if(o in n){let a=n[o];r=r&&a({name:o,value:s,event:t,element:e})}else continue;return r}invokeWithEvent(t){let{target:e,currentTarget:n}=t;try{let{params:r}=this.action,o=Object.assign(t,{params:r});this.method.call(this.controller,o),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:n,action:this.methodName})}catch(r){let{identifier:o,controller:s,element:a,index:c}=this,l={identifier:o,controller:s,element:a,index:c,event:t};this.context.handleError(r,`invoking action "${this.action}"`,l)}}willBeInvokedByEvent(t){let e=t.target;return t instanceof KeyboardEvent&&this.action.isFilterTarget(t)?!1:this.element===e?!0:e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},lt=class{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let t=new Set(this.matchElementsInTree());for(let e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(let e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){t.type=="attributes"?this.processAttributeChange(t.target,t.attributeName):t.type=="childList"&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){let n=t;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,e):this.removeElement(n):this.matchElement(n)&&this.addElement(n)}processRemovedNodes(t){for(let e of Array.from(t)){let n=this.elementFromNode(e);n&&this.processTree(n,this.removeElement)}}processAddedNodes(t){for(let e of Array.from(t)){let n=this.elementFromNode(e);n&&this.elementIsActive(n)&&this.processTree(n,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(let n of this.matchElementsInTree(t))e.call(this,n)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected!=this.element.isConnected?!1:this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}},Tt=class{constructor(t,e,n){this.attributeName=e,this.delegate=n,this.elementObserver=new lt(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){let e=this.matchElement(t)?[t]:[],n=Array.from(t.querySelectorAll(this.selector));return e.concat(n)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}};function cn(i,t,e){ue(i,t).add(e)}function ln(i,t,e){ue(i,t).delete(e),un(i,t)}function ue(i,t){let e=i.get(t);return e||(e=new Set,i.set(t,e)),e}function un(i,t){let e=i.get(t);e!=null&&e.size==0&&i.delete(t)}var _=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((e,n)=>e.concat(Array.from(n)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((e,n)=>e+n.size,0)}add(t,e){cn(this.valuesByKey,t,e)}delete(t,e){ln(this.valuesByKey,t,e)}has(t,e){let n=this.valuesByKey.get(t);return n!=null&&n.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some(n=>n.has(t))}getValuesForKey(t){let e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter(([e,n])=>n.has(t)).map(([e,n])=>e)}};var St=class{constructor(t,e,n,r={}){this.selector=e,this.details=r,this.elementObserver=new lt(t,this),this.delegate=n,this.matchesByElement=new _}get started(){return this.elementObserver.started}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){let e=t.matches(this.selector);return this.delegate.selectorMatchElement?e&&this.delegate.selectorMatchElement(t,this.details):e}matchElementsInTree(t){let e=this.matchElement(t)?[t]:[],n=Array.from(t.querySelectorAll(this.selector)).filter(r=>this.matchElement(r));return e.concat(n)}elementMatched(t){this.selectorMatched(t)}elementUnmatched(t){this.selectorUnmatched(t)}elementAttributeChanged(t,e){let n=this.matchElement(t),r=this.matchesByElement.has(this.selector,t);!n&&r&&this.selectorUnmatched(t)}selectorMatched(t){this.delegate.selectorMatched&&(this.delegate.selectorMatched(t,this.selector,this.details),this.matchesByElement.add(this.selector,t))}selectorUnmatched(t){this.delegate.selectorUnmatched(t,this.selector,this.details),this.matchesByElement.delete(this.selector,t)}},_t=class{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){let e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){let n=this.delegate.getStringMapKeyForAttribute(t);if(n!=null){this.stringMap.has(t)||this.stringMapKeyAdded(n,t);let r=this.element.getAttribute(t);if(this.stringMap.get(t)!=r&&this.stringMapValueChanged(r,n,e),r==null){let o=this.stringMap.get(t);this.stringMap.delete(t),o&&this.stringMapKeyRemoved(n,t,o)}else this.stringMap.set(t,r)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,n)}stringMapKeyRemoved(t,e,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(t=>t.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},ut=class{constructor(t,e,n){this.attributeObserver=new Tt(t,e,this),this.delegate=n,this.tokensByElement=new _}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){let[e,n]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(n)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach(e=>this.tokenMatched(e))}tokensUnmatched(t){t.forEach(e=>this.tokenUnmatched(e))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){let e=this.tokensByElement.getValuesForKey(t),n=this.readTokensForElement(t),r=hn(e,n).findIndex(([o,s])=>!pn(o,s));return r==-1?[[],[]]:[e.slice(r),n.slice(r)]}readTokensForElement(t){let e=this.attributeName,n=t.getAttribute(e)||"";return dn(n,t,e)}};function dn(i,t,e){return i.trim().split(/\s+/).filter(n=>n.length).map((n,r)=>({element:t,attributeName:e,content:n,index:r}))}function hn(i,t){let e=Math.max(i.length,t.length);return Array.from({length:e},(n,r)=>[i[r],t[r]])}function pn(i,t){return i&&t&&i.index==t.index&&i.content==t.content}var dt=class{constructor(t,e,n){this.tokenListObserver=new ut(t,e,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){let{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).set(t,n),this.delegate.elementMatchedValue(e,n))}tokenUnmatched(t){let{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,n))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(e){return{error:e}}}},Mt=class{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new dt(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){let e=new Ct(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){let e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach(t=>this.delegate.bindingDisconnected(t,!0)),this.bindingsByAction.clear()}parseValueForToken(t){let e=At.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}},Bt=class{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new _t(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){let n=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,n.writer(this.receiver[t]),n.writer(n.defaultValue))}stringMapValueChanged(t,e,n){let r=this.valueDescriptorNameMap[e];t!==null&&(n===null&&(n=r.writer(r.defaultValue)),this.invokeChangedCallback(e,t,n))}stringMapKeyRemoved(t,e,n){let r=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,r.writer(this.receiver[t]),n):this.invokeChangedCallback(t,r.writer(r.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(let{key:t,name:e,defaultValue:n,writer:r}of this.valueDescriptors)n!=null&&!this.controller.data.has(t)&&this.invokeChangedCallback(e,r(n),void 0)}invokeChangedCallback(t,e,n){let r=`${t}Changed`,o=this.receiver[r];if(typeof o=="function"){let s=this.valueDescriptorNameMap[t];try{let a=s.reader(e),c=n;n&&(c=s.reader(n)),o.call(this.receiver,a,c)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${s.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:t}=this;return Object.keys(t).map(e=>t[e])}get valueDescriptorNameMap(){let t={};return Object.keys(this.valueDescriptorMap).forEach(e=>{let n=this.valueDescriptorMap[e];t[n.name]=n}),t}hasValue(t){let e=this.valueDescriptorNameMap[t],n=`has${J(e.name)}`;return this.receiver[n]}},Lt=class{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new _}start(){this.tokenListObserver||(this.tokenListObserver=new ut(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var n;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetConnected(t,e)))}disconnectTarget(t,e){var n;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetDisconnected(t,e)))}disconnectAllTargets(){for(let t of this.targetsByName.keys)for(let e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function X(i,t){let e=de(i);return Array.from(e.reduce((n,r)=>(gn(r,t).forEach(o=>n.add(o)),n),new Set))}function fn(i,t){return de(i).reduce((n,r)=>(n.push(...mn(r,t)),n),[])}function de(i){let t=[];for(;i;)t.push(i),i=Object.getPrototypeOf(i);return t.reverse()}function gn(i,t){let e=i[t];return Array.isArray(e)?e:[]}function mn(i,t){let e=i[t];return e?Object.keys(e).map(n=>[n,e[n]]):[]}var Nt=class{constructor(t,e){this.context=t,this.delegate=e,this.outletsByName=new _,this.outletElementsByName=new _,this.selectorObserverMap=new Map}start(){this.selectorObserverMap.size===0&&(this.outletDefinitions.forEach(t=>{let e=this.selector(t),n={outletName:t};e&&this.selectorObserverMap.set(t,new St(document.body,e,this,n))}),this.selectorObserverMap.forEach(t=>t.start())),this.dependentContexts.forEach(t=>t.refresh())}stop(){this.selectorObserverMap.size>0&&(this.disconnectAllOutlets(),this.selectorObserverMap.forEach(t=>t.stop()),this.selectorObserverMap.clear())}refresh(){this.selectorObserverMap.forEach(t=>t.refresh())}selectorMatched(t,e,{outletName:n}){let r=this.getOutlet(t,n);r&&this.connectOutlet(r,t,n)}selectorUnmatched(t,e,{outletName:n}){let r=this.getOutletFromMap(t,n);r&&this.disconnectOutlet(r,t,n)}selectorMatchElement(t,{outletName:e}){return this.hasOutlet(t,e)&&t.matches(`[${this.context.application.schema.controllerAttribute}~=${e}]`)}connectOutlet(t,e,n){var r;this.outletElementsByName.has(n,e)||(this.outletsByName.add(n,t),this.outletElementsByName.add(n,e),(r=this.selectorObserverMap.get(n))===null||r===void 0||r.pause(()=>this.delegate.outletConnected(t,e,n)))}disconnectOutlet(t,e,n){var r;this.outletElementsByName.has(n,e)&&(this.outletsByName.delete(n,t),this.outletElementsByName.delete(n,e),(r=this.selectorObserverMap.get(n))===null||r===void 0||r.pause(()=>this.delegate.outletDisconnected(t,e,n)))}disconnectAllOutlets(){for(let t of this.outletElementsByName.keys)for(let e of this.outletElementsByName.getValuesForKey(t))for(let n of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(n,e,t)}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}get outletDependencies(){let t=new _;return this.router.modules.forEach(e=>{let n=e.definition.controllerConstructor;X(n,"outlets").forEach(o=>t.add(o,e.identifier))}),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let t=this.dependentControllerIdentifiers;return this.router.contexts.filter(e=>t.includes(e.identifier))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find(n=>n.element===t)}get scope(){return this.context.scope}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Ft=class{constructor(t,e){this.logDebugActivity=(n,r={})=>{let{identifier:o,controller:s,element:a}=this;r=Object.assign({identifier:o,controller:s,element:a},r),this.application.logDebugActivity(this.identifier,n,r)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new Mt(this,this.dispatcher),this.valueObserver=new Bt(this,this.controller),this.targetObserver=new Lt(this,this),this.outletObserver=new Nt(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(n){this.handleError(n,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,n={}){let{identifier:r,controller:o,element:s}=this;n=Object.assign({identifier:r,controller:o,element:s},n),this.application.handleError(t,`Error ${e}`,n)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,n){this.invokeControllerMethod(`${Ot(n)}OutletConnected`,t,e)}outletDisconnected(t,e,n){this.invokeControllerMethod(`${Ot(n)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){let n=this.controller;typeof n[t]=="function"&&n[t](...e)}};function vn(i){return yn(i,bn(i))}function yn(i,t){let e=En(i),n=wn(i.prototype,t);return Object.defineProperties(e.prototype,n),e}function bn(i){return X(i,"blessings").reduce((e,n)=>{let r=n(i);for(let o in r){let s=e[o]||{};e[o]=Object.assign(s,r[o])}return e},{})}function wn(i,t){return kn(t).reduce((e,n)=>{let r=xn(i,t,n);return r&&Object.assign(e,{[n]:r}),e},{})}function xn(i,t,e){let n=Object.getOwnPropertyDescriptor(i,e);if(!(n&&"value"in n)){let o=Object.getOwnPropertyDescriptor(t,e).value;return n&&(o.get=n.get||o.get,o.set=n.set||o.set),o}}var kn=(()=>typeof Object.getOwnPropertySymbols=="function"?i=>[...Object.getOwnPropertyNames(i),...Object.getOwnPropertySymbols(i)]:Object.getOwnPropertyNames)(),En=(()=>{function i(e){function n(){return Reflect.construct(e,arguments,new.target)}return n.prototype=Object.create(e.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,e),n}function t(){let n=i(function(){this.a.call(this)});return n.prototype.a=function(){},new n}try{return t(),i}catch{return n=>class extends n{}}})();function On(i){return{identifier:i.identifier,controllerConstructor:vn(i.controllerConstructor)}}var $t=class{constructor(t,e){this.application=t,this.definition=On(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){let e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){let e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new Ft(this,t),this.contextsByScope.set(t,e)),e}},Dt=class{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){let e=this.data.get(this.getDataKey(t))||"";return on(e)}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}},jt=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){let e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){let n=this.getAttributeNameForKey(t);return this.element.setAttribute(n,e),this.get(t)}has(t){let e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){let e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}else return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${le(t)}`}},It=class{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,n){let r=this.warnedKeysByObject.get(t);r||(r=new Set,this.warnedKeysByObject.set(t,r)),r.has(e)||(r.add(e),this.logger.warn(n,t))}};function Rt(i,t){return`[${i}~="${t}"]`}var Vt=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,n)=>e||this.findTarget(n)||this.findLegacyTarget(n),void 0)}findAll(...t){return t.reduce((e,n)=>[...e,...this.findAllTargets(n),...this.findAllLegacyTargets(n)],[])}findTarget(t){let e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){let e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){let e=this.schema.targetAttributeForScope(this.identifier);return Rt(e,t)}findLegacyTarget(t){let e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){let e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map(n=>this.deprecate(n,t))}getLegacySelectorForTargetName(t){let e=`${this.identifier}.${t}`;return Rt(this.schema.targetAttribute,e)}deprecate(t,e){if(t){let{identifier:n}=this,r=this.schema.targetAttribute,o=this.schema.targetAttributeForScope(n);this.guide.warn(t,`target:${e}`,`Please replace ${r}="${n}.${e}" with ${o}="${e}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}},Pt=class{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,n)=>e||this.findOutlet(n),void 0)}findAll(...t){return t.reduce((e,n)=>[...e,...this.findAllOutlets(n)],[])}getSelectorForOutletName(t){let e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){let e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){let e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter(r=>this.matchesElement(r,t,e))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter(r=>this.matchesElement(r,t,e))}matchesElement(t,e,n){let r=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&r.split(" ").includes(n)}},Kt=class i{constructor(t,e,n,r){this.targets=new Vt(this),this.classes=new Dt(this),this.data=new jt(this),this.containsElement=o=>o.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=n,this.guide=new It(r),this.outlets=new Pt(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return Rt(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new i(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Ht=class{constructor(t,e,n){this.element=t,this.schema=e,this.delegate=n,this.valueListObserver=new dt(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){let{element:e,content:n}=t,r=this.fetchScopesByIdentifierForElement(e),o=r.get(n);return o||(o=this.delegate.createScopeForElementAndIdentifier(e,n),r.set(n,o)),o}elementMatchedValue(t,e){let n=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,n),n==1&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){let n=this.scopeReferenceCounts.get(e);n&&(this.scopeReferenceCounts.set(e,n-1),n==1&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}},qt=class{constructor(t){this.application=t,this.scopeObserver=new Ht(this.element,this.schema,this),this.scopesByIdentifier=new _,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((t,e)=>t.concat(e.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);let e=new $t(this.application,t);this.connectModule(e);let n=t.controllerConstructor.afterLoad;n&&n(t.identifier,this.application)}unloadIdentifier(t){let e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){let n=this.modulesByIdentifier.get(e);if(n)return n.contexts.find(r=>r.element==t)}handleError(t,e,n){this.application.handleError(t,e,n)}createScopeForElementAndIdentifier(t,e){return new Kt(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(n=>t.connectContextForScope(n))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(n=>t.disconnectContextForScope(n))}},An={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:i=>`data-${i}-target`,outletAttributeForScope:(i,t)=>`data-${i}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End"},se("abcdefghijklmnopqrstuvwxyz".split("").map(i=>[i,i]))),se("0123456789".split("").map(i=>[i,i])))};function se(i){return i.reduce((t,[e,n])=>Object.assign(Object.assign({},t),{[e]:n}),{})}var ht=class{constructor(t=document.documentElement,e=An){this.logger=console,this.debug=!1,this.logDebugActivity=(n,r,o={})=>{this.debug&&this.logFormattedMessage(n,r,o)},this.element=t,this.schema=e,this.dispatcher=new Et(this),this.router=new qt(this),this.actionDescriptorFilters=Object.assign({},Ze)}static start(t,e){let n=new this(t,e);return n.start(),n}async start(){await Cn(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(r=>{r.controllerConstructor.shouldLoad&&this.router.loadDefinition(r)})}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(r=>this.router.unloadIdentifier(r))}get controllers(){return this.router.contexts.map(t=>t.controller)}getControllerForElementAndIdentifier(t,e){let n=this.router.getContextForElementAndIdentifier(t,e);return n?n.controller:null}handleError(t,e,n){var r;this.logger.error(`%s

%o

%o`,e,t,n),(r=window.onerror)===null||r===void 0||r.call(window,e,"",0,0,t)}logFormattedMessage(t,e,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}};function Cn(){return new Promise(i=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>i()):i()})}function Tn(i){return X(i,"classes").reduce((e,n)=>Object.assign(e,Sn(n)),{})}function Sn(i){return{[`${i}Class`]:{get(){let{classes:t}=this;if(t.has(i))return t.get(i);{let e=t.getAttributeName(i);throw new Error(`Missing attribute "${e}"`)}}},[`${i}Classes`]:{get(){return this.classes.getAll(i)}},[`has${J(i)}Class`]:{get(){return this.classes.has(i)}}}}function _n(i){return X(i,"outlets").reduce((e,n)=>Object.assign(e,Mn(n)),{})}function Mn(i){let t=Ot(i);return{[`${t}Outlet`]:{get(){let e=this.outlets.find(i);if(e){let n=this.application.getControllerForElementAndIdentifier(e,i);if(n)return n;throw new Error(`Missing "data-controller=${i}" attribute on outlet element for "${this.identifier}" controller`)}throw new Error(`Missing outlet element "${i}" for "${this.identifier}" controller`)}},[`${t}Outlets`]:{get(){let e=this.outlets.findAll(i);return e.length>0?e.map(n=>{let r=this.application.getControllerForElementAndIdentifier(n,i);if(r)return r;console.warn(`The provided outlet element is missing the outlet controller "${i}" for "${this.identifier}"`,n)}).filter(n=>n):[]}},[`${t}OutletElement`]:{get(){let e=this.outlets.find(i);if(e)return e;throw new Error(`Missing outlet element "${i}" for "${this.identifier}" controller`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(i)}},[`has${J(t)}Outlet`]:{get(){return this.outlets.has(i)}}}}function Bn(i){return X(i,"targets").reduce((e,n)=>Object.assign(e,Ln(n)),{})}function Ln(i){return{[`${i}Target`]:{get(){let t=this.targets.find(i);if(t)return t;throw new Error(`Missing target element "${i}" for "${this.identifier}" controller`)}},[`${i}Targets`]:{get(){return this.targets.findAll(i)}},[`has${J(i)}Target`]:{get(){return this.targets.has(i)}}}}function Nn(i){let t=fn(i,"values"),e={valueDescriptorMap:{get(){return t.reduce((n,r)=>{let o=he(r,this.identifier),s=this.data.getAttributeNameForKey(o.key);return Object.assign(n,{[s]:o})},{})}}};return t.reduce((n,r)=>Object.assign(n,Fn(r)),e)}function Fn(i,t){let e=he(i,t),{key:n,name:r,reader:o,writer:s}=e;return{[r]:{get(){let a=this.data.get(n);return a!==null?o(a):e.defaultValue},set(a){a===void 0?this.data.delete(n):this.data.set(n,s(a))}},[`has${J(r)}`]:{get(){return this.data.has(n)||e.hasCustomDefaultValue}}}}function he([i,t],e){return In({controller:e,token:i,typeDefinition:t})}function Wt(i){switch(i){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function U(i){switch(typeof i){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(i))return"array";if(Object.prototype.toString.call(i)==="[object Object]")return"object"}function $n(i){let t=Wt(i.typeObject.type);if(!t)return;let e=U(i.typeObject.default);if(t!==e){let n=i.controller?`${i.controller}.${i.token}`:i.token;throw new Error(`The specified default value for the Stimulus Value "${n}" must match the defined type "${t}". The provided default value of "${i.typeObject.default}" is of type "${e}".`)}return t}function Dn(i){let t=$n({controller:i.controller,token:i.token,typeObject:i.typeDefinition}),e=U(i.typeDefinition),n=Wt(i.typeDefinition),r=t||e||n;if(r)return r;let o=i.controller?`${i.controller}.${i.typeDefinition}`:i.token;throw new Error(`Unknown value type "${o}" for "${i.token}" value`)}function jn(i){let t=Wt(i);if(t)return Rn[t];let e=i.default;return e!==void 0?e:i}function In(i){let t=`${le(i.token)}-value`,e=Dn(i);return{type:e,key:t,name:zt(t),get defaultValue(){return jn(i.typeDefinition)},get hasCustomDefaultValue(){return U(i.typeDefinition)!==void 0},reader:Vn[e],writer:ae[e]||ae.default}}var Rn={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Vn={array(i){let t=JSON.parse(i);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${i}" of type "${U(t)}"`);return t},boolean(i){return!(i=="0"||String(i).toLowerCase()=="false")},number(i){return Number(i)},object(i){let t=JSON.parse(i);if(t===null||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${i}" of type "${U(t)}"`);return t},string(i){return i}},ae={default:Pn,array:ce,object:ce};function ce(i){return JSON.stringify(i)}function Pn(i){return`${i}`}var C=class{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:n={},prefix:r=this.identifier,bubbles:o=!0,cancelable:s=!0}={}){let a=r?`${r}:${t}`:t,c=new CustomEvent(a,{detail:n,bubbles:o,cancelable:s});return e.dispatchEvent(c),c}};C.blessings=[Tn,Bn,Nn,_n];C.targets=[];C.outlets=[];C.values={};var I=ht.start();I.warnings=!0;I.debug=!0;window.Stimulus=I;var Y=class{constructor(t){this.response=t}get statusCode(){return this.response.status}get redirected(){return this.response.redirected}get ok(){return this.response.ok}get unauthenticated(){return this.statusCode===401}get unprocessableEntity(){return this.statusCode===422}get authenticationURL(){return this.response.headers.get("WWW-Authenticate")}get contentType(){return(this.response.headers.get("Content-Type")||"").replace(/;.*$/,"")}get headers(){return this.response.headers}get html(){return this.contentType.match(/^(application|text)\/(html|xhtml\+xml)$/)?this.text:Promise.reject(new Error(`Expected an HTML response but got "${this.contentType}" instead`))}get json(){return this.contentType.match(/^application\/.*json$/)?this.responseJson||(this.responseJson=this.response.json()):Promise.reject(new Error(`Expected a JSON response but got "${this.contentType}" instead`))}get text(){return this.responseText||(this.responseText=this.response.text())}get isTurboStream(){return this.contentType.match(/^text\/vnd\.turbo-stream\.html/)}async renderTurboStream(){if(this.isTurboStream)window.Turbo?await window.Turbo.renderStreamMessage(await this.text):console.warn("You must set `window.Turbo = Turbo` to automatically process Turbo Stream events with request.js");else return Promise.reject(new Error(`Expected a Turbo Stream response but got "${this.contentType}" instead`))}};var G=class{static register(t){this.interceptor=t}static get(){return this.interceptor}static reset(){this.interceptor=void 0}};function pe(i){let t=document.cookie?document.cookie.split("; "):[],e=`${encodeURIComponent(i)}=`,n=t.find(r=>r.startsWith(e));if(n){let r=n.split("=").slice(1).join("=");if(r)return decodeURIComponent(r)}}function fe(i){let t={};for(let e in i){let n=i[e];n!==void 0&&(t[e]=n)}return t}function Ut(i){let t=document.head.querySelector(`meta[name="${i}"]`);return t&&t.content}function ge(i){return[...i].reduce((t,[e,n])=>t.concat(typeof n=="string"?[[e,n]]:[]),[])}function me(i,t){for(let[e,n]of t)n instanceof window.File||(i.has(e)&&!e.includes("[]")?(i.delete(e),i.set(e,n)):i.append(e,n))}var Z=class{constructor(t,e,n={}){this.method=t,this.options=n,this.originalUrl=e.toString()}async perform(){try{let e=G.get();e&&await e(this)}catch(e){console.error(e)}let t=new Y(await window.fetch(this.url,this.fetchOptions));return t.unauthenticated&&t.authenticationURL?Promise.reject(window.location.href=t.authenticationURL):(t.ok&&t.isTurboStream&&await t.renderTurboStream(),t)}addHeader(t,e){let n=this.additionalHeaders;n[t]=e,this.options.headers=n}sameHostname(){if(!this.originalUrl.startsWith("http:"))return!0;try{return new URL(this.originalUrl).hostname===window.location.hostname}catch{return!0}}get fetchOptions(){return{method:this.method.toUpperCase(),headers:this.headers,body:this.formattedBody,signal:this.signal,credentials:"same-origin",redirect:this.redirect}}get headers(){let t={"X-Requested-With":"XMLHttpRequest","Content-Type":this.contentType,Accept:this.accept};return this.sameHostname()&&(t["X-CSRF-Token"]=this.csrfToken),fe(Object.assign(t,this.additionalHeaders))}get csrfToken(){return pe(Ut("csrf-param"))||Ut("csrf-token")}get contentType(){return this.options.contentType?this.options.contentType:this.body==null||this.body instanceof window.FormData?void 0:this.body instanceof window.File?this.body.type:"application/json"}get accept(){switch(this.responseKind){case"html":return"text/html, application/xhtml+xml";case"turbo-stream":return"text/vnd.turbo-stream.html, text/html, application/xhtml+xml";case"json":return"application/json, application/vnd.api+json";default:return"*/*"}}get body(){return this.options.body}get query(){let t=(this.originalUrl.split("?")[1]||"").split("#")[0],e=new URLSearchParams(t),n=this.options.query;n instanceof window.FormData?n=ge(n):n instanceof window.URLSearchParams?n=n.entries():n=Object.entries(n||{}),me(e,n);let r=e.toString();return r.length>0?`?${r}`:""}get url(){return this.originalUrl.split("?")[0].split("#")[0]+this.query}get responseKind(){return this.options.responseKind||"html"}get signal(){return this.options.signal}get redirect(){return this.options.redirect||"follow"}get additionalHeaders(){return this.options.headers||{}}get formattedBody(){let t=Object.prototype.toString.call(this.body)==="[object String]";return this.headers["Content-Type"]==="application/json"&&!t?JSON.stringify(this.body):this.body}};async function Jt(i,t){return new Z("post",i,t).perform()}function Kn(i,t){var e=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var n,r,o,s,a=[],c=!0,l=!1;try{if(o=(e=e.call(i)).next,t===0){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=o.call(e)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){l=!0,r=d}finally{try{if(!c&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}function ve(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function D(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ve(Object(e),!0).forEach(function(n){Fe(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ve(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function K(i){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(i)}function rt(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,je(n.key),n)}}function ot(i,t,e){return t&&ye(i.prototype,t),e&&ye(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Fe(i,t,e){return t=je(t),t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function $e(i,t){return zn(i)||Kn(i,t)||De(i,t)||Jn()}function Hn(i){return qn(i)||Wn(i)||De(i)||Un()}function qn(i){if(Array.isArray(i))return Qt(i)}function zn(i){if(Array.isArray(i))return i}function Wn(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function De(i,t){if(i){if(typeof i=="string")return Qt(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Qt(i,t)}}function Qt(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function Un(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xn(i,t){if(typeof i!="object"||i===null)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function je(i){var t=Xn(i,"string");return typeof t=="symbol"?t:String(t)}var Ie={exports:{}};(function(i){var t=function(e,n){return this instanceof t?e instanceof t?e:((e=typeof e=="string"?this.select(e,n):e)&&e.nodeName&&(e=[e]),void(this.nodes=this.slice(e))):new t(e,n)};t.prototype={get length(){return this.nodes.length}},t.prototype.nodes=[],t.prototype.addClass=function(){return this.eacharg(arguments,function(e,n){e.classList.add(n)})},t.prototype.adjacent=function(e,n,r){return typeof n=="number"&&(n=n===0?[]:new Array(n).join().split(",").map(Number.call,Number)),this.each(function(o,s){var a=document.createDocumentFragment();t(n||{}).map(function(c,l){return l=typeof e=="function"?e.call(this,c,l,o,s):e,typeof l=="string"?this.generate(l):t(l)}).each(function(c){this.isInPage(c)?a.appendChild(t(c).clone().first()):a.appendChild(c)}),r.call(this,o,a)})},t.prototype.after=function(e,n){return this.adjacent(e,n,function(r,o){r.parentNode.insertBefore(o,r.nextSibling)})},t.prototype.append=function(e,n){return this.adjacent(e,n,function(r,o){r.appendChild(o)})},t.prototype.args=function(e,n,r){return(e=typeof(e=typeof e=="function"?e(n,r):e)!="string"?this.slice(e).map(this.str(n,r)):e).toString().split(/[\s,]+/).filter(function(o){return o.length})},t.prototype.array=function(e){var n=this;return this.nodes.reduce(function(r,o,s){var a;return e?(a=typeof(a=(a=e.call(n,o,s))||!1)=="string"?t(a):a)instanceof t&&(a=a.nodes):a=o.innerHTML,r.concat(a!==!1?a:[])},[])},t.prototype.attr=function(e,n,r){return r=r?"data-":"",this.pairs(e,n,function(o,s){return o.getAttribute(r+s)},function(o,s,a){a?o.setAttribute(r+s,a):o.removeAttribute(r+s)})},t.prototype.before=function(e,n){return this.adjacent(e,n,function(r,o){r.parentNode.insertBefore(o,r)})},t.prototype.children=function(e){return this.map(function(n){return this.slice(n.children)}).filter(e)},t.prototype.clone=function(){return this.map(function(e,n){var r=e.cloneNode(!0),o=this.getAll(r);return this.getAll(e).each(function(s,a){for(var c in this.mirror)this.mirror[c]&&this.mirror[c](s,o.nodes[a])}),r})},t.prototype.getAll=function(e){return t([e].concat(t("*",e).nodes))},t.prototype.mirror={},t.prototype.mirror.events=function(e,n){if(e._e)for(var r in e._e)e._e[r].forEach(function(o){t(n).on(r,o.callback)})},t.prototype.mirror.select=function(e,n){t(e).is("select")&&(n.value=e.value)},t.prototype.mirror.textarea=function(e,n){t(e).is("textarea")&&(n.value=e.value)},t.prototype.closest=function(e){return this.map(function(n){do if(t(n).is(e))return n;while((n=n.parentNode)&&n!==document)})},t.prototype.data=function(e,n){return this.attr(e,n,!0)},t.prototype.each=function(e){return this.nodes.forEach(e.bind(this)),this},t.prototype.eacharg=function(e,n){return this.each(function(r,o){this.args(e,r,o).forEach(function(s){n.call(this,r,s)},this)})},t.prototype.empty=function(){return this.each(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})},t.prototype.filter=function(e){var n=e instanceof t?function(r){return e.nodes.indexOf(r)!==-1}:typeof e=="function"?e:function(r){return r.matches=r.matches||r.msMatchesSelector||r.webkitMatchesSelector,r.matches(e||"*")};return t(this.nodes.filter(n))},t.prototype.find=function(e){return this.map(function(n){return t(e||"*",n)})},t.prototype.first=function(){return this.nodes[0]||!1},t.prototype.generate=function(e){return/^\s*<tr[> ]/.test(e)?t(document.createElement("table")).html(e).children().children().nodes:/^\s*<t(h|d)[> ]/.test(e)?t(document.createElement("table")).html(e).children().children().children().nodes:/^\s*</.test(e)?t(document.createElement("div")).html(e).children().nodes:document.createTextNode(e)},t.prototype.handle=function(){var e=this.slice(arguments).map(function(n){return typeof n=="function"?function(r){r.preventDefault(),n.apply(this,arguments)}:n},this);return this.on.apply(this,e)},t.prototype.hasClass=function(){return this.is("."+this.args(arguments).join("."))},t.prototype.html=function(e){return e===void 0?this.first().innerHTML||"":this.each(function(n){n.innerHTML=e})},t.prototype.is=function(e){return 0<this.filter(e).length},t.prototype.isInPage=function(e){return e!==document.body&&document.body.contains(e)},t.prototype.last=function(){return this.nodes[this.length-1]||!1},t.prototype.map=function(e){return e?t(this.array(e)).unique():this},t.prototype.not=function(e){return this.filter(function(n){return!t(n).is(e||!0)})},t.prototype.off=function(e,n,r){var o=n==null&&r==null,s=null,a=n;return typeof n=="string"&&(s=n,a=r),this.eacharg(e,function(c,l){t(c._e?c._e[l]:[]).each(function(d){(o||d.orig_callback===a&&d.selector===s)&&c.removeEventListener(l,d.callback)})})},t.prototype.on=function(e,n,r){function o(l,d){try{Object.defineProperty(l,"currentTarget",{value:d,configurable:!0})}catch{}}var s=null,a=n;typeof n=="string"&&(s=n,a=r,n=function(l){var d=arguments;t(l.currentTarget).find(s).each(function(u){var h;u.contains(l.target)&&(h=l.currentTarget,o(l,u),r.apply(u,d),o(l,h))})});function c(l){return n.apply(this,[l].concat(l.detail||[]))}return this.eacharg(e,function(l,d){l.addEventListener(d,c),l._e=l._e||{},l._e[d]=l._e[d]||[],l._e[d].push({callback:c,orig_callback:a,selector:s})})},t.prototype.pairs=function(e,n,r,o){var s;return n!==void 0&&(s=e,(e={})[s]=n),typeof e=="object"?this.each(function(a,c){for(var l in e)typeof e[l]=="function"?o(a,l,e[l](a,c)):o(a,l,e[l])}):this.length?r(this.first(),e):""},t.prototype.param=function(e){return Object.keys(e).map(function(n){return this.uri(n)+"="+this.uri(e[n])}.bind(this)).join("&")},t.prototype.parent=function(e){return this.map(function(n){return n.parentNode}).filter(e)},t.prototype.prepend=function(e,n){return this.adjacent(e,n,function(r,o){r.insertBefore(o,r.firstChild)})},t.prototype.remove=function(){return this.each(function(e){e.parentNode&&e.parentNode.removeChild(e)})},t.prototype.removeClass=function(){return this.eacharg(arguments,function(e,n){e.classList.remove(n)})},t.prototype.replace=function(e,n){var r=[];return this.adjacent(e,n,function(o,s){r=r.concat(this.slice(s.children)),o.parentNode.replaceChild(s,o)}),t(r)},t.prototype.scroll=function(){return this.first().scrollIntoView({behavior:"smooth"}),this},t.prototype.select=function(e,n){return e=e.replace(/^\s*/,"").replace(/\s*$/,""),/^</.test(e)?t().generate(e):(n||document).querySelectorAll(e)},t.prototype.serialize=function(){var e=this;return this.slice(this.first().elements).reduce(function(n,r){return!r.name||r.disabled||r.type==="file"||/(checkbox|radio)/.test(r.type)&&!r.checked?n:r.type==="select-multiple"?(t(r.options).each(function(o){o.selected&&(n+="&"+e.uri(r.name)+"="+e.uri(o.value))}),n):n+"&"+e.uri(r.name)+"="+e.uri(r.value)},"").slice(1)},t.prototype.siblings=function(e){return this.parent().children(e).not(this)},t.prototype.size=function(){return this.first().getBoundingClientRect()},t.prototype.slice=function(e){return e&&e.length!==0&&typeof e!="string"&&e.toString()!=="[object Function]"?e.length?[].slice.call(e.nodes||e):[e]:[]},t.prototype.str=function(e,n){return function(r){return typeof r=="function"?r.call(this,e,n):r.toString()}},t.prototype.text=function(e){return e===void 0?this.first().textContent||"":this.each(function(n){n.textContent=e})},t.prototype.toggleClass=function(e,n){return!!n===n?this[n?"addClass":"removeClass"](e):this.eacharg(e,function(r,o){r.classList.toggle(o)})},t.prototype.trigger=function(e){var n=this.slice(arguments).slice(1);return this.eacharg(e,function(r,o){var s,a={bubbles:!0,cancelable:!0,detail:n};try{s=new window.CustomEvent(o,a)}catch{(s=document.createEvent("CustomEvent")).initCustomEvent(o,!0,!0,n)}r.dispatchEvent(s)})},t.prototype.unique=function(){return t(this.nodes.reduce(function(e,n){return n!=null&&n!==!1&&e.indexOf(n)===-1?e.concat(n):e},[]))},t.prototype.uri=function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},t.prototype.wrap=function(e){return this.map(function(n){return t(e).each(function(r){(function(o){for(;o.firstElementChild;)o=o.firstElementChild;return t(o)})(r).append(n.cloneNode(!0)),n.parentNode.replaceChild(r,n)})})},i.exports&&(i.exports=t,i.exports.u=t)})(Ie);var v=Ie.exports,Yn=`<svg id="GuidedTourIconSet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display: none;">
<symbol id="tour-icon-close" viewBox="0 0 20 20"><g fill="none" stroke="currentColor" stroke-width="2"><path d="M16,16 L4,4"></path><path d="M16,4 L4,16"></path></g></symbol>
<symbol id="tour-icon-next" viewBox="0 0 20 20"><polyline points="7 4 13 10 7 16" fill="none" stroke="currentColor" stroke-width="1"></polyline></symbol>
<symbol id="tour-icon-prev" viewBox="0 0 20 20"><polyline points="12 4 6 10 12 16" fill="none" stroke="currentColor" stroke-width="1"></polyline></symbol>
<symbol id="tour-icon-complete" viewBox="0 0 20 20"><polyline points="4,10 8,15 17,4" fill="none" stroke="currentColor" stroke-width="1"></polyline></symbol>
</svg>`,Re="complete",be="canceled";function Gn(i){if("requestAnimationFrame"in window)return window.requestAnimationFrame(i);setTimeout(i,16)}function we(i,t,e){i.self===i?i.scrollTo(t,e):(i.scrollLeft=t,i.scrollTop=e)}function Zn(i,t){var e=i.align,n=i.target,r=n.getBoundingClientRect(),o,s,a,c,l,d,u,h=e&&e.left!=null?e.left:.5,p=e&&e.top!=null?e.top:.5,m=e&&e.leftOffset!=null?e.leftOffset:0,f=e&&e.topOffset!=null?e.topOffset:0,g=h,y=p;if(i.isWindow(t))d=Math.min(r.width,t.innerWidth),u=Math.min(r.height,t.innerHeight),s=r.left+t.pageXOffset-t.innerWidth*g+d*g,a=r.top+t.pageYOffset-t.innerHeight*y+u*y,s-=m,a-=f,s=i.align.lockX?t.pageXOffset:s,a=i.align.lockY?t.pageYOffset:a,c=s-t.pageXOffset,l=a-t.pageYOffset;else{d=r.width,u=r.height,o=t.getBoundingClientRect();var b=r.left-(o.left-t.scrollLeft),w=r.top-(o.top-t.scrollTop);s=b+d*g-t.clientWidth*g,a=w+u*y-t.clientHeight*y,s-=m,a-=f,s=Math.max(Math.min(s,t.scrollWidth-t.clientWidth),0),a=Math.max(Math.min(a,t.scrollHeight-t.clientHeight),0),s=i.align.lockX?t.scrollLeft:s,a=i.align.lockY?t.scrollTop:a,c=s-t.scrollLeft,l=a-t.scrollTop}return{x:s,y:a,differenceX:c,differenceY:l}}function ft(i){var t=i._scrollSettings;if(t){var e=t.maxSynchronousAlignments,n=Zn(t,i),r=Date.now()-t.startTime,o=Math.min(1/t.time*r,1);if(t.endIterations>=e)return we(i,n.x,n.y),i._scrollSettings=null,t.end(Re);var s=1-t.ease(o);if(we(i,n.x-n.differenceX*s,n.y-n.differenceY*s),r>=t.time){t.endIterations++,t.scrollAncestor&&ft(t.scrollAncestor),ft(i);return}Gn(ft.bind(null,i))}}function Qn(i){return i.self===i}function ti(i,t,e,n,r){var o=!t._scrollSettings,s=t._scrollSettings,a=Date.now(),c,l={passive:!0};s&&s.end(be);function d(h){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(h),e.debug&&console.log("Scrolling ended with type",h,"for",t),r(h),c&&(t.removeEventListener("touchstart",c,l),t.removeEventListener("wheel",c,l))}var u=e.maxSynchronousAlignments;return u==null&&(u=3),t._scrollSettings={startTime:a,endIterations:0,target:i,time:e.time,ease:e.ease,align:e.align,isWindow:e.isWindow||Qn,maxSynchronousAlignments:u,end:d,scrollAncestor:n},(!("cancellable"in e)||e.cancellable)&&(c=d.bind(null,be),t.addEventListener("touchstart",c,l),t.addEventListener("wheel",c,l)),o&&ft(t),c}function xe(i){return"pageXOffset"in i||(i.scrollHeight!==i.clientHeight||i.scrollWidth!==i.clientWidth)&&getComputedStyle(i).overflow!=="hidden"}function ei(){return!0}function te(i){if(i.assignedSlot)return te(i.assignedSlot);if(i.parentElement)return i.parentElement.tagName.toLowerCase()==="body"?i.parentElement.ownerDocument.defaultView||i.parentElement.ownerDocument.ownerWindow:i.parentElement;if(i.getRootNode){var t=i.getRootNode();if(t.nodeType===11)return t.host}}var ni=function(i,t,e){if(!i)return;typeof t=="function"&&(e=t,t=null),t||(t={}),t.time=isNaN(t.time)?1e3:t.time,t.ease=t.ease||function(l){return 1-Math.pow(1-l,l/2)},t.align=t.align||{};var n=te(i),r=1;function o(l){r--,r||e&&e(l)}var s=t.validTarget||ei,a=t.isScrollable;t.debug&&(console.log("About to scroll to",i),n||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var c=[];n;)if(t.debug&&console.log("Scrolling parent node",n),s(n,r)&&(a?a(n,xe):xe(n))&&(r++,c.push(n)),n=te(n),!n){o(Re);break}return c.reduce((l,d,u)=>ti(i,d,t,c[u+1],o),null)};function ke(i,t){if(!i)throw"TourguideJS: ".concat(t);return!0}function M(i,t,e){return t=isNaN(t)?i:t,e=isNaN(e)?i:e,Math.max(t,Math.min(i,e))}function ii(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=i.split(";"),n=D({},t);return e.forEach(function(r){var o=(r||"").split(":");n[(o[0]||"").trim()]=(o[1]||"").trim()}),n}function Xt(i){return i&&i.offsetParent!==null}function Ee(i,t){var e=v(i).size(),n=Ve(t);return{width:e.width,height:e.height,top:e.top+n.scrollY,bottom:e.bottom+n.scrollY,left:e.left+n.scrollX,right:e.right+n.scrollX,viewTop:e.top,viewBottom:e.bottom,viewLeft:e.left,viewRight:e.right}}function Ve(i){try{var t=v(i).size();return{width:window.innerWidth,height:window.innerHeight,scrollX:window.scrollX,scrollY:window.scrollY,rootWidth:t.width,rootHeight:t.height,rootTop:t.top,rootLeft:t.left}}catch(e){throw console.error(e),Error("element is invalid: ".concat(i))}}function $(i,t){Object.assign(v(i).first().style,t)}function ri(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"--tourguide",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:":host",n=[];return Object.entries(i).forEach(function(r){for(var o=$e(r,2),s=o[0],a=o[1],c=[t],l=0,d=0;d<s.length;d+=1)"A"<=s[d]&&s[d]<="Z"&&(c.push(s.substring(l,d).toLowerCase()),l=d);c.push(s.substring(l,s.length).toLowerCase()),n.push("".concat(c.join("-"),": ").concat(a))}),"".concat(e,` {
`).concat(n.join(`;
`),`;
}`)}function Oe(i,t,e){i.self===i?i.scrollTo(t,e):(i.scrollLeft=t,i.scrollTop=e)}function oi(i,t){var e=Date.now();function n(s){if("requestAnimationFrame"in window)return window.requestAnimationFrame(s);setTimeout(s,16)}function r(s){return 1-Math.pow(1-s,s/2)}function o(s,a,c){if(!s){console.warn("target element ".concat(s," not found, skip"));return}var l=Date.now()-e,d=Math.min(1/t*l,1),u=1-r(d),h=a-s.scrollLeft,p=c-s.scrollTop;if(Oe(s,a-h*u,c-p*u),l>=t){Oe(s,a,c);return}n(o.bind(null,s,a,c))}i.forEach(function(s){o(s.element,s.x,s.y)})}function si(i){var t=[],e=v(i);do{e||(e=!1),e.first()||(e=!1);try{var n=e.first();(n.scrollHeight!==n.height||n.scrollWidth!==n.width)&&t.push({element:e.first(),x:e.first().scrollLeft,y:e.first().scrollTop}),e=e.parent()}catch{e=!1}}while(e);return t}function ai(){return Math.max.apply(Math,Hn(Array.from(document.querySelectorAll("body *"),function(i){return parseFloat(window.getComputedStyle(i).zIndex)}).filter(function(i){return!Number.isNaN(i)})).concat([0]))}function j(i){return i.split("-")[1]}function ie(i){return i==="y"?"height":"width"}function et(i){return i.split("-")[0]}function vt(i){return["top","bottom"].includes(et(i))?"x":"y"}function Ae(i,t,e){let{reference:n,floating:r}=i,o=n.x+n.width/2-r.width/2,s=n.y+n.height/2-r.height/2,a=vt(t),c=ie(a),l=n[c]/2-r[c]/2,d=a==="x",u;switch(et(t)){case"top":u={x:o,y:n.y-r.height};break;case"bottom":u={x:o,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:s};break;case"left":u={x:n.x-r.width,y:s};break;default:u={x:n.x,y:n.y}}switch(j(t)){case"start":u[a]-=l*(e&&d?-1:1);break;case"end":u[a]+=l*(e&&d?-1:1)}return u}var ci=async(i,t,e)=>{let{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:s}=e,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(t)),l=await s.getElementRects({reference:i,floating:t,strategy:r}),{x:d,y:u}=Ae(l,n,c),h=n,p={},m=0;for(let f=0;f<a.length;f++){let{name:g,fn:y}=a[f],{x:b,y:w,data:k,reset:x}=await y({x:d,y:u,initialPlacement:n,placement:h,strategy:r,middlewareData:p,rects:l,platform:s,elements:{reference:i,floating:t}});d=b??d,u=w??u,p={...p,[g]:{...p[g],...k}},x&&m<=50&&(m++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(l=x.rects===!0?await s.getElementRects({reference:i,floating:t,strategy:r}):x.rects),{x:d,y:u}=Ae(l,h,c)),f=-1)}return{x:d,y:u,placement:h,strategy:r,middlewareData:p}};function Pe(i){return typeof i!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(i):{top:i,right:i,bottom:i,left:i}}function gt(i){return{...i,top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height}}async function li(i,t){var e;t===void 0&&(t={});let{x:n,y:r,platform:o,rects:s,elements:a,strategy:c}=i,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=t,m=Pe(p),f=a[h?u==="floating"?"reference":"floating":u],g=gt(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(f)))==null||e?f:f.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:d,strategy:c})),y=u==="floating"?{...s.floating,x:n,y:r}:s.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),w=await(o.isElement==null?void 0:o.isElement(b))&&await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1},k=gt(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:b,strategy:c}):y);return{top:(g.top-k.top+m.top)/w.y,bottom:(k.bottom-g.bottom+m.bottom)/w.y,left:(g.left-k.left+m.left)/w.x,right:(k.right-g.right+m.right)/w.x}}var ui=Math.min,di=Math.max;function hi(i,t,e){return di(i,ui(t,e))}var pi=i=>({name:"arrow",options:i,async fn(t){let{element:e,padding:n=0}=i||{},{x:r,y:o,placement:s,rects:a,platform:c}=t;if(e==null)return{};let l=Pe(n),d={x:r,y:o},u=vt(s),h=ie(u),p=await c.getDimensions(e),m=u==="y"?"top":"left",f=u==="y"?"bottom":"right",g=a.reference[h]+a.reference[u]-d[u]-a.floating[h],y=d[u]-a.reference[u],b=await(c.getOffsetParent==null?void 0:c.getOffsetParent(e)),w=b?u==="y"?b.clientHeight||0:b.clientWidth||0:0;w===0&&(w=a.floating[h]);let k=g/2-y/2,x=l[m],H=w-p[h]-l[f],O=w/2-p[h]/2+k,q=hi(x,O,H),at=j(s)!=null&&O!=q&&a.reference[h]/2-(O<x?l[m]:l[f])-p[h]/2<0;return{[u]:d[u]-(at?O<x?x-O:H-O:0),data:{[u]:q,centerOffset:O-q}}}}),fi=["top","right","bottom","left"],Ce=fi.reduce((i,t)=>i.concat(t,t+"-start",t+"-end"),[]),gi={left:"right",right:"left",bottom:"top",top:"bottom"};function Te(i){return i.replace(/left|right|bottom|top/g,t=>gi[t])}function mi(i,t,e){e===void 0&&(e=!1);let n=j(i),r=vt(i),o=ie(r),s=r==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Te(s)),{main:s,cross:Te(s)}}var vi={start:"end",end:"start"};function yi(i){return i.replace(/start|end/g,t=>vi[t])}var bi=function(i){return i===void 0&&(i={}),{name:"autoPlacement",options:i,async fn(t){var e,n,r;let{rects:o,middlewareData:s,placement:a,platform:c,elements:l}=t,{alignment:d,allowedPlacements:u=Ce,autoAlignment:h=!0,...p}=i,m=d!==void 0||u===Ce?function(S,z,W){return(S?[...W.filter(A=>j(A)===S),...W.filter(A=>j(A)!==S)]:W.filter(A=>et(A)===A)).filter(A=>!S||j(A)===S||!!z&&yi(A)!==A)}(d||null,h,u):u,f=await li(t,p),g=((e=s.autoPlacement)==null?void 0:e.index)||0,y=m[g];if(y==null)return{};let{main:b,cross:w}=mi(y,o,await(c.isRTL==null?void 0:c.isRTL(l.floating)));if(a!==y)return{reset:{placement:m[0]}};let k=[f[et(y)],f[b],f[w]],x=[...((n=s.autoPlacement)==null?void 0:n.overflows)||[],{placement:y,overflows:k}],H=m[g+1];if(H)return{data:{index:g+1,overflows:x},reset:{placement:H}};let O=x.slice().sort((S,z)=>S.overflows[0]-z.overflows[0]),q=(r=O.find(S=>{let{overflows:z}=S;return z.every(W=>W<=0)}))==null?void 0:r.placement,at=q||O[0].placement;return at!==a?{data:{index:g+1,overflows:x},reset:{placement:at}}:{}}}},wi=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(t){let{x:e,y:n}=t,r=await async function(o,s){let{placement:a,platform:c,elements:l}=o,d=await(c.isRTL==null?void 0:c.isRTL(l.floating)),u=et(a),h=j(a),p=vt(a)==="x",m=["left","top"].includes(u)?-1:1,f=d&&p?-1:1,g=typeof s=="function"?s(o):s,{mainAxis:y,crossAxis:b,alignmentAxis:w}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return h&&typeof w=="number"&&(b=h==="end"?-1*w:w),p?{x:b*f,y:y*m}:{x:y*m,y:b*f}}(t,i);return{x:e+r.x,y:n+r.y,data:r}}}};function E(i){var t;return((t=i.ownerDocument)==null?void 0:t.defaultView)||window}function T(i){return E(i).getComputedStyle(i)}function F(i){return He(i)?(i.nodeName||"").toLowerCase():""}var pt;function Ke(){if(pt)return pt;let i=navigator.userAgentData;return i&&Array.isArray(i.brands)?(pt=i.brands.map(t=>t.brand+"/"+t.version).join(" "),pt):navigator.userAgent}function B(i){return i instanceof E(i).HTMLElement}function L(i){return i instanceof E(i).Element}function He(i){return i instanceof E(i).Node}function Se(i){return typeof ShadowRoot>"u"?!1:i instanceof E(i).ShadowRoot||i instanceof ShadowRoot}function yt(i){let{overflow:t,overflowX:e,overflowY:n,display:r}=T(i);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!["inline","contents"].includes(r)}function xi(i){return["table","td","th"].includes(F(i))}function ee(i){let t=/firefox/i.test(Ke()),e=T(i),n=e.backdropFilter||e.WebkitBackdropFilter;return e.transform!=="none"||e.perspective!=="none"||!!n&&n!=="none"||t&&e.willChange==="filter"||t&&!!e.filter&&e.filter!=="none"||["transform","perspective"].some(r=>e.willChange.includes(r))||["paint","layout","strict","content"].some(r=>{let o=e.contain;return o!=null&&o.includes(r)})}function qe(){return!/^((?!chrome|android).)*safari/i.test(Ke())}function re(i){return["html","body","#document"].includes(F(i))}var _e=Math.min,tt=Math.max,mt=Math.round;function ze(i){let t=T(i),e=parseFloat(t.width),n=parseFloat(t.height),r=i.offsetWidth,o=i.offsetHeight,s=mt(e)!==r||mt(n)!==o;return s&&(e=r,n=o),{width:e,height:n,fallback:s}}function We(i){return L(i)?i:i.contextElement}var Ue={x:1,y:1};function P(i){let t=We(i);if(!B(t))return Ue;let e=t.getBoundingClientRect(),{width:n,height:r,fallback:o}=ze(t),s=(o?mt(e.width):e.width)/n,a=(o?mt(e.height):e.height)/r;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}function nt(i,t,e,n){var r,o;t===void 0&&(t=!1),e===void 0&&(e=!1);let s=i.getBoundingClientRect(),a=We(i),c=Ue;t&&(n?L(n)&&(c=P(n)):c=P(i));let l=a?E(a):window,d=!qe()&&e,u=(s.left+(d&&((r=l.visualViewport)==null?void 0:r.offsetLeft)||0))/c.x,h=(s.top+(d&&((o=l.visualViewport)==null?void 0:o.offsetTop)||0))/c.y,p=s.width/c.x,m=s.height/c.y;if(a){let f=E(a),g=n&&L(n)?E(n):n,y=f.frameElement;for(;y&&n&&g!==f;){let b=P(y),w=y.getBoundingClientRect(),k=getComputedStyle(y);w.x+=(y.clientLeft+parseFloat(k.paddingLeft))*b.x,w.y+=(y.clientTop+parseFloat(k.paddingTop))*b.y,u*=b.x,h*=b.y,p*=b.x,m*=b.y,u+=w.x,h+=w.y,y=E(y).frameElement}}return{width:p,height:m,top:h,right:u+p,bottom:h+m,left:u,x:u,y:h}}function N(i){return((He(i)?i.ownerDocument:i.document)||window.document).documentElement}function bt(i){return L(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function Je(i){return nt(N(i)).left+bt(i).scrollLeft}function ki(i,t,e){let n=B(t),r=N(t),o=nt(i,!0,e==="fixed",t),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(n||!n&&e!=="fixed")if((F(t)!=="body"||yt(r))&&(s=bt(t)),B(t)){let c=nt(t,!0);a.x=c.x+t.clientLeft,a.y=c.y+t.clientTop}else r&&(a.x=Je(r));return{x:o.left+s.scrollLeft-a.x,y:o.top+s.scrollTop-a.y,width:o.width,height:o.height}}function it(i){if(F(i)==="html")return i;let t=i.assignedSlot||i.parentNode||(Se(i)?i.host:null)||N(i);return Se(t)?t.host:t}function Me(i){return B(i)&&T(i).position!=="fixed"?i.offsetParent:null}function Be(i){let t=E(i),e=Me(i);for(;e&&xi(e)&&T(e).position==="static";)e=Me(e);return e&&(F(e)==="html"||F(e)==="body"&&T(e).position==="static"&&!ee(e))?t:e||function(n){let r=it(n);for(;B(r)&&!re(r);){if(ee(r))return r;r=it(r)}return null}(i)||t}function Xe(i){let t=it(i);return re(t)?i.ownerDocument.body:B(t)&&yt(t)?t:Xe(t)}function Ye(i,t){var e;t===void 0&&(t=[]);let n=Xe(i),r=n===((e=i.ownerDocument)==null?void 0:e.body),o=E(n);return r?t.concat(o,o.visualViewport||[],yt(n)?n:[]):t.concat(n,Ye(n))}function Le(i,t,e){return t==="viewport"?gt(function(n,r){let o=E(n),s=N(n),a=o.visualViewport,c=s.clientWidth,l=s.clientHeight,d=0,u=0;if(a){c=a.width,l=a.height;let h=qe();(h||!h&&r==="fixed")&&(d=a.offsetLeft,u=a.offsetTop)}return{width:c,height:l,x:d,y:u}}(i,e)):L(t)?function(n,r){let o=nt(n,!0,r==="fixed"),s=o.top+n.clientTop,a=o.left+n.clientLeft,c=B(n)?P(n):{x:1,y:1},l=n.clientWidth*c.x,d=n.clientHeight*c.y,u=a*c.x,h=s*c.y;return{top:h,left:u,right:u+l,bottom:h+d,x:u,y:h,width:l,height:d}}(t,e):gt(function(n){var r;let o=N(n),s=bt(n),a=(r=n.ownerDocument)==null?void 0:r.body,c=tt(o.scrollWidth,o.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=tt(o.scrollHeight,o.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),d=-s.scrollLeft+Je(n),u=-s.scrollTop;return T(a||o).direction==="rtl"&&(d+=tt(o.clientWidth,a?a.clientWidth:0)-c),{width:c,height:l,x:d,y:u}}(N(i)))}var Ei={getClippingRect:function(i){let{element:t,boundary:e,rootBoundary:n,strategy:r}=i,o=e==="clippingAncestors"?function(l,d){let u=d.get(l);if(u)return u;let h=Ye(l).filter(g=>L(g)&&F(g)!=="body"),p=null,m=T(l).position==="fixed",f=m?it(l):l;for(;L(f)&&!re(f);){let g=T(f),y=ee(f);(m?y||p:y||g.position!=="static"||!p||!["absolute","fixed"].includes(p.position))?p=g:h=h.filter(b=>b!==f),f=it(f)}return d.set(l,h),h}(t,this._c):[].concat(e),s=[...o,n],a=s[0],c=s.reduce((l,d)=>{let u=Le(t,d,r);return l.top=tt(u.top,l.top),l.right=_e(u.right,l.right),l.bottom=_e(u.bottom,l.bottom),l.left=tt(u.left,l.left),l},Le(t,a,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(i){let{rect:t,offsetParent:e,strategy:n}=i,r=B(e),o=N(e);if(e===o)return t;let s={scrollLeft:0,scrollTop:0},a={x:1,y:1},c={x:0,y:0};if((r||!r&&n!=="fixed")&&((F(e)!=="body"||yt(o))&&(s=bt(e)),B(e))){let l=nt(e);a=P(e),c.x=l.x+e.clientLeft,c.y=l.y+e.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-s.scrollLeft*a.x+c.x,y:t.y*a.y-s.scrollTop*a.y+c.y}},isElement:L,getDimensions:function(i){return ze(i)},getOffsetParent:Be,getDocumentElement:N,getScale:P,async getElementRects(i){let{reference:t,floating:e,strategy:n}=i,r=this.getOffsetParent||Be,o=this.getDimensions;return{reference:ki(t,await r(e),n),floating:{x:0,y:0,...await o(e)}}},getClientRects:i=>Array.from(i.getClientRects()),isRTL:i=>T(i).direction==="rtl"},Oi=(i,t,e)=>{let n=new Map,r={platform:Ei,...e},o={...r.platform,_c:n};return ci(i,t,{...r,platform:o})},Ai={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function Ne(i){return i.replace(RegExp("^"+(i.match(/^(\t| )+/)||"")[0],"gm"),"")}function Q(i){return(i+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ne(i,t){var e,n,r,o,s,a=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,c=[],l="",d=t||{},u=0;function h(m){var f=Ai[m[1]||""],g=c[c.length-1]==m;return f?f[1]?(g?c.pop():c.push(m),f[0|g]):f[0]:m}function p(){for(var m="";c.length;)m+=h(c[c.length-1]);return m}for(i=i.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(m,f,g){return d[f.toLowerCase()]=g,""}).replace(/^\n+|\n+$/g,"");r=a.exec(i);)n=i.substring(u,r.index),u=a.lastIndex,e=r[0],n.match(/[^\\](\\\\)*\\$/)||((s=r[3]||r[4])?e='<pre class="code '+(r[4]?"poetry":r[2].toLowerCase())+'"><code'+(r[2]?' class="language-'+r[2].toLowerCase()+'"':"")+">"+Ne(Q(s).replace(/^\n+|\n+$/g,""))+"</code></pre>":(s=r[6])?(s.match(/\./)&&(r[5]=r[5].replace(/^\d+/gm,"")),o=ne(Ne(r[5].replace(/^\s*[>*+.-]/gm,""))),s==">"?s="blockquote":(s=s.match(/\./)?"ol":"ul",o=o.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),e="<"+s+">"+o+"</"+s+">"):r[8]?e='<img src="'+Q(r[8])+'" alt="'+Q(r[7])+'">':r[10]?(l=l.replace("<a>",'<a href="'+Q(r[11]||d[n.toLowerCase()])+'">'),e=p()+"</a>"):r[9]?e="<a>":r[12]||r[14]?e="<"+(s="h"+(r[14]?r[14].length:r[13]>"="?1:2))+">"+ne(r[12]||r[15],d)+"</"+s+">":r[16]?e="<code>"+Q(r[16])+"</code>":(r[17]||r[1])&&(e=h(r[17]||"--"))),l+=n,l+=e;return(l+i.substring(u)+p()).replace(/^\n+|\n+$/g,"")}var Ci=function(t){var e=t.padding,n=e===void 0?0:e;return{name:"keepinview",fn:function(o){var s=o.x,a=o.y,c=o.rects,l=o.middlewareData,d=o.platform,u=d.getDimensions(document.body),h=M(s,n,u.width-c.floating.width-n),p=M(a,n,u.height-c.floating.height-n),m=s-h,f=a-p,g=l.arrow;return g&&(g.x&&m&&(g.x+=m),g.y&&f&&(g.y+=f)),{x:h,y:p}}}};function Ti(i,t,e,n){Oi(i,t,{middleware:[bi({alignment:"bottom-start"}),wi(function(r){var o=r.placement.split("-")[0];switch(o){case"top":return 32;case"left":case"right":return 24;default:return 6}}),pi({element:e,padding:8}),Ci({padding:24})]}).then(function(r){var o=r.x,s=r.y,a=r.middlewareData,c=r.placement;if($(t,{left:"".concat(o,"px"),top:"".concat(s,"px")}),a.arrow){var l=c.split("-")[0],d={top:"bottom",right:"left",bottom:"top",left:"right"}[l];$(e,Fe({left:a.arrow.x!=null?"".concat(a.arrow.x,"px"):"",top:a.arrow.y!=null?"".concat(a.arrow.y,"px"):"",right:"",bottom:""},d,"".concat(-e.offsetWidth/2,"px")))}})}var Yt=function(){function i(t,e){var n=this;rt(this,i),this.active=!1,this.first=!1,this.last=!1,this.container=null,this.highlight=null,this.tooltip=null,this.arrow=null,this.context=e,this._target=null,this._timerHandler=null,this._scrollCancel=null;var r;if(t instanceof HTMLElement?(this.target=t,r=ii(v(t).data("tour"))):(r=t,this._selector=t.selector),ke(r.hasOwnProperty("title"),`missing required step parameter: title
`+JSON.stringify(r,null,2)+`
see this doc for more detail: https://github.com/LikaloLLC/tourguide.js#json-based-approach`),ke(r.hasOwnProperty("content"),`missing required step parameter: content
`+JSON.stringify(r,null,2)+`
see this doc for more detail: https://github.com/LikaloLLC/tourguide.js#json-based-approach`),this.index=parseInt(r.step),this.title=r.title,this.content=ne(r.content),this.image=r.image,this.width=r.width,this.height=r.height,this.layout=r.layout||"vertical",this.placement=r.placement||"bottom",this.overlay=r.overlay!==!1,this.navigation=r.navigation!==!1,r.image&&e.options.preloadimages&&!/^data:/i.test(r.image)){var o=new Image;o.onerror=function(){console.error(new Error("Invalid image URL: ".concat(r.image))),n.image=null},o.src=this.image}this.actions=[],r.actions&&(Array.isArray(r.actions)?this.actions=r.actions:console.error(new Error("actions must be array but got ".concat(K(r.actions)))))}return ot(i,[{key:"el",get:function(){var e=this;if(!this.container){var n=v('<div role="figure" class="guided-tour-step-image">'.concat(this.image?'<img src="'.concat(this.image,'" />'):"","</div>")),r=v(`<div class="guided-tour-step-content-wrapper">
        <div id="tooltip-title-`.concat(this.index,'" role="heading" class="guided-tour-step-title">').concat(this.context._decorateText(this.title,this),`</div>
        <div class="guided-tour-step-content">`).concat(this.context._decorateText(this.content,this),`</div>
      </div>`));if(r.find("a").on("click",function(h){e.context.action(h,{action:"link"})}),Array.isArray(this.actions)&&this.actions.length>0){var o=v(`<div class="guided-tour-step-actions">
          `.concat(this.actions.map(function(h,p){return"<".concat(h.href?"a":"button",' id="').concat(h.id,'" ').concat(h.href?'href="'.concat(h.href,'"'):""," ").concat(h.target?'target="'.concat(h.target,'"'):"",' class="button').concat(h.primary?" primary":"",'" data-index="').concat(p,'">').concat(h.label,"</").concat(h.href?"a":"button",">")}).join(""),`
        </div>`));o.find("a, button").on("click",function(h){var p=e.actions[parseInt(h.target.dataset.index)];p.action&&h.preventDefault(),e.context.action(h,p)}),r.append(o)}var s=this.tooltip=v('<div role="document" class="guided-tour-step-tooltip"></div>');this.width&&$(s,{width:this.width+"px",maxWidth:this.width+"px"}),this.height&&$(s,{height:this.height+"px",maxHeight:this.height+"px"});var a=v('<div class="guided-tour-step-tooltip-inner'.concat(this.layout==="horizontal"?" step-layout-horizontal":"",'"></div>')),c=v('<div class="guided-tour-step-content-container"></div>');c.append(n).append(r);var l=this.arrow=v('<div class="guided-tour-arrow"></div>');if(this.navigation){var d=v(`<div class="guided-tour-step-footer">
                  <button class="guided-tour-step-button guided-tour-step-button-close" title="End tour">
                      <svg class="guided-tour-icon" viewBox="0 0 20 20" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-close"></use></svg>
                  </button>
                  `.concat(this.first?"":`<button class="guided-tour-step-button guided-tour-step-button-prev" title="Prev step">
                    <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">
                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-prev"></use>
                    </svg>
                  </button>`,`
                  `).concat(this.last?`<button class="guided-tour-step-button guided-tour-step-button-complete" title="Complete tour">
                    <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">
                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-complete"></use>
                    </svg>
                  </button>`:`<button class="guided-tour-step-button guided-tour-step-button-next" title="Next step">
                    <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">
                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-next"></use>
                    </svg>
                  </button>`,`
                  `).concat(this.context._steps.length>1?`<div class="guided-tour-step-bullets">
                      <ul>`.concat(this.context._steps.map(function(h,p){return'<li><button title="Go to step '.concat(p+1,'" data-index="').concat(p,'" class="').concat(h.index<e.index?"complete":h.index==e.index?"current":"",'"></button></li>')}).join(""),`</ul>
                  </div>`):"",`
              </div>`));d.find(".guided-tour-step-button-prev").on("click",this.context.previous),d.find(".guided-tour-step-button-next").on("click",this.context.next),d.find(".guided-tour-step-button-close").on("click",this.context.stop),d.find(".guided-tour-step-button-complete").on("click",this.context.complete),d.find(".guided-tour-step-bullets button").on("click",function(h){return e.context.go(parseInt(v(h.target).data("index")))}),a.append(l).append(c).append(d)}else a.append(l).append(c);if(s.append(a),this.container=v('<div role="dialog" aria-labelleby="tooltip-title-'.concat(this.index,'" class="guided-tour-step').concat(this.first?" guided-tour-step-first":"").concat(this.last?" guided-tour-step-last":"",'"></div>')),this.overlay&&Xt(this.target)){var u=this.highlight=v('<div class="guided-tour-step-highlight"></div>');this.container.append(u).append(s)}else this.container.append(s)}return this.container}},{key:"target",get:function(){return this._target||this._selector&&v(this._selector).first()},set:function(e){this._target=e}},{key:"attach",value:function(e){v(e).append(this.el)}},{key:"remove",value:function(){this.hide(),this.el.remove()}},{key:"position",value:function(){var e=Ve(this.context._options.root),n=this.tooltip,r=this.highlight,o={top:0,left:0,width:0,height:0};if(Xt(this.target)){if(this.overlay&&this.highlight){var s=Ee(this.target,this.context._options.root);o.top=s.top-this.context.options.padding,o.left=s.left-this.context.options.padding,o.width=s.width+this.context.options.padding*2,o.height=s.height+this.context.options.padding*2,$(r,o)}Ti(this.target,n.first(),this.arrow.first(),this.context)}else{this.overlay&&this.highlight&&$(r,o);var a={},c=Ee(n,this.context._options.root);a.top=e.height/2+e.scrollY-e.rootTop-c.height/2,a.left=e.width/2+e.scrollX-e.rootLeft-c.width/2,a.bottom="unset",a.right="unset",n.addClass("guided-tour-arrow-none"),$(n,a),this.overlay&&this.context._overlay.show()}}},{key:"cancel",value:function(){this._timerHandler&&clearTimeout(this._timerHandler),this._scrollCancel&&this._scrollCancel()}},{key:"show",value:function(){var e=this;if(this.cancel(),!this.active){var n=function(){e.el.addClass("active"),e.context._overlay.hide(),e.position(),e.active=!0,e.container.find(".guided-tour-step-tooltip, button.primary, .guided-tour-step-button-complete, .guided-tour-step-button-next").last().focus({preventScroll:!0})},r=M(this.context.options.animationspeed,120,1e3);return Xt(this.target)&&(this._scrollCancel=ni(this.target,{time:r,cancellable:!1,align:{top:.5,left:.5}})),this._timerHandler=setTimeout(n,r*3),!0}return!1}},{key:"hide",value:function(){return this.cancel(),this.active?(this.el.removeClass("active"),this.tooltip.removeClass("guided-tour-arrow-top"),this.tooltip.removeClass("guided-tour-arrow-bottom"),this.overlay&&this.context._overlay.show(),this.active=!1,!0):!1}},{key:"toJSON",value:function(){var e=this.index,n=this.title,r=this.content,o=this.image,s=this.active;return{index:e,title:n,content:r,image:o,active:s}}}]),i}(),Si=function(){function i(t){rt(this,i),this.context=t,this.container=null,this.active=!1}return ot(i,[{key:"el",get:function(){return this.container||(this.container=v('<div role="dialog" class="guided-tour-overlay"></div>')),this.container}},{key:"attach",value:function(e){v(e).append(this.el)}},{key:"remove",value:function(){this.hide(),this.el.remove()}},{key:"show",value:function(){return this.active?!1:(this.el.addClass("active"),this.active=!0,!0)}},{key:"hide",value:function(){return this.active?(this.el.removeClass("active"),this.active=!1,!0):!1}},{key:"toJSON",value:function(){var e=this.active;return{active:e}}}]),i}();function _i(i){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function Gt(i){var t=i.toString(16);return t.length==1?"0"+t:t}function Mi(i,t,e){return"#"+Gt(Math.floor(i))+Gt(Math.floor(t))+Gt(Math.floor(e))}function Bi(i,t,e){i/=255,t/=255,e/=255;var n=Math.max(i,t,e),r=n-Math.min(i,t,e),o=r?n===i?(t-e)/r:n===t?2+(e-i)/r:4+(i-t)/r:0;return[60*o<0?60*o+360:60*o,100*(r?n<=.5?r/(2*n-r):r/(2-(2*n-r)):0),100*(2*n-r)/2]}function Li(i,t,e){t/=100,e/=100;var n=function(a){return(a+i/30)%12},r=t*Math.min(e,1-e),o=function(a){return e-r*Math.max(-1,Math.min(n(a)-3,Math.min(9-n(a),1)))};return[255*o(0),255*o(8),255*o(4)]}function Ni(i){return Bi.apply(null,_i(i))}function Fi(i,t,e){return Mi.apply(null,Li(i,t,e))}function Zt(i,t,e,n){var r=Ni(i);return r[0]=M(r[0]*t,0,255),r[1]=M(r[1]*e,0,255),r[2]=M(r[2]*n,0,255),Fi.apply(null,r)}function $i(i,t){var e=Object.assign(i,t||{}),n=/Color$/,r=e.accentColor;return Object.keys(e).filter(function(o){return n.test(o)&&e[o]==="auto"}).forEach(function(o){switch(o){case"focusColor":case"stepButtonNextColor":case"stepButtonCompleteColor":case"bulletCurrentColor":e[o]=r;break;case"bulletColor":e[o]=Zt(r,1,.8,1.4);break;case"bulletVisitedColor":e[o]=Zt(r,1,.3,1.2);break;case"stepButtonPrevColor":case"stepButtonCloseColor":e[o]=Zt(r,1,.2,.8);break}}),e}var Di=ot(function i(t,e){rt(this,i),this.name=t,this.onAction=e});function ji(i){return(i||"").split(",").map(function(t){return t.trim()}).filter(Boolean)}function Ii(i,t){var e=[],n;for(t.lastIndex=0;(n=t.exec(i))!==null;)n.index===t.lastIndex&&t.lastIndex++,e.push({match:n[0],start:n.index,length:n[0].length,properties:ji(n[1])});return e}var Ri=function(){function i(t,e){rt(this,i),typeof t=="string"?this.match=new RegExp("{s*".concat(t.trim(),"s*(,.+?)?s*?}"),"gmi"):this.match=t,this.decoratorFn=e}return ot(i,[{key:"test",value:function(e){return this.match.test(e)}},{key:"render",value:function(e,n,r){try{var o=Ii(e,this.match).reverse();return this.decoratorFn(e,o,n,r)}catch(s){return console.warn(s),e}}}]),i}(),Vi=`:host {
  position: absolute;
  overflow: visible;
  top: 0;
  left: 0;
  width: 0;
  height: 0;
  box-sizing: border-box;
  line-height: 1.4;
  text-align: left;
  text-rendering: optimizespeed;
  font-family: var(--tourguide-font-family);
  font-size: var(--tourguide-font-size);
  color: var(--tourguide-text-color);
  /* 1 */
  -webkit-text-size-adjust: 100%;
  /* 2 */
  -moz-tab-size: 4;
  /* 3 */
  tab-size: 4;
  /* 3 */
}

* {
  margin: 0;
  padding: 0;
  background: none;
  border: none;
  border-width: 0;
  border-style: none;
  border-color: currentColor;
  box-shadow: none;
  color: inherit;
  appearance: none;
  font-size: inherit;
  font-weight: inherit;
  text-decoration: none;
}

a,
button {
  cursor: pointer;
}
a:hover, a:focus,
button:hover,
button:focus {
  outline: 5px auto var(--tourguide-focus-color);
}

.guided-tour-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  background-color: var(--tourguide-overlay-color);
}
.guided-tour-overlay.active {
  display: block;
}

.guided-tour-step {
  display: none;
}
.guided-tour-step.active {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: all;
}
.guided-tour-step.active .guided-tour-step-highlight {
  position: absolute;
  box-sizing: border-box;
  border-radius: 4px;
  box-shadow: 0 0 0 999em var(--tourguide-overlay-color);
  z-index: 1;
}
.guided-tour-step.active .guided-tour-step-tooltip {
  position: absolute;
  margin: 16px 0;
  z-index: 2;
  background-color: var(--tourguide-background-color);
  width: var(--tourguide-tooltip-width);
  max-width: max-content;
  border-radius: 5px;
  box-sizing: border-box;
  box-shadow: 0 0 3em -0.8em #000;
  transition: opacity 150ms;
}
@media screen and (max-width: 760px) {
  .guided-tour-step.active .guided-tour-step-tooltip {
    max-width: 85vw;
    width: max-content !important;
  }
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-arrow {
  position: absolute;
  width: 1em;
  height: 1em;
  background: var(--tourguide-background-color);
  z-index: -1;
  transform: rotate(45deg);
  pointer-events: none;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content-container {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  height: calc(100% - 2.6em);
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-image {
  flex-grow: 1;
  flex-shrink: 1;
  overflow: hidden;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-image img {
  width: 100%;
  height: 100%;
  border-radius: 4px 4px 0 0;
  object-fit: cover;
  object-position: center;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content-wrapper {
  margin: 1.5em 2.5em;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-title {
  font-size: 1.4em;
  margin-bottom: 0.8em;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content {
  flex-shrink: 0;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content b,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content strong {
  font-weight: bold;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content i,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content em {
  font-style: italic;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content a {
  cursor: pointer;
  text-decoration: underline;
  color: var(--tourguide-accent-color);
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content mark {
  background: inherit;
  text-shadow: 0px 2px 4px #ff0;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content code,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content dfn {
  padding: 1px 6px 1px 4px;
  border-radius: 4px;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content code {
  background-color: #f0f0f0;
  color: #e83e8c;
  font-family: monospace;
  font-size: 87.5%;
  word-break: break-word;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content dfn {
  font-style: italic;
  background-color: #ffc6e5;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content p,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ul,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ol,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content blockquote {
  margin: 1em 0;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content p:last-child,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ul:last-child,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ol:last-child,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content blockquote:last-child {
  margin-bottom: 0;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content blockquote {
  padding-left: 1em;
  border-left: 4px solid silver;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ul,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ol {
  padding-left: 1.5em;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ul li,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ol li {
  margin: 0.3em 0;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions {
  display: flex;
  column-gap: 0.5em;
  margin-top: 1.5em;
  justify-content: end;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions .button {
  color: var(--tourguide-accent-color);
  padding: 0.5em 1em;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions .button.primary {
  background: var(--tourguide-accent-color);
  padding: 0.5em 1.5em;
  color: #fff;
  border-radius: 4px;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions .button.primary:hover, .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions .button.primary:focus {
  filter: brightness(120%);
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-icon {
  display: inline-block;
  overflow: hidden;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button {
  flex-direction: column;
  justify-content: center;
  /* <-- actual veertical align */
  display: inline-flex;
  text-align: center;
  cursor: pointer;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button .guided-tour-icon {
  align-self: center;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-close {
  position: absolute;
  top: 0;
  right: 0;
  width: 2em;
  height: 2em;
  color: var(--tourguide-step-button-close-color);
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-prev,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-next,
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-complete {
  width: 3em;
  height: 3em;
  background: var(--tourguide-background-color);
  border-radius: 50%;
  margin-top: -1.5em;
  position: absolute;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-prev {
  color: var(--tourguide-step-button-prev-color);
  left: 0;
  transform: translateX(-50%);
  top: 50%;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-next {
  color: var(--tourguide-step-button-next-color);
  right: 0;
  transform: translateX(50%);
  top: 50%;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-complete {
  color: var(--tourguide-step-button-complete-color);
  right: 0;
  transform: translateX(50%);
  top: 50%;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-footer {
  flex-shrink: 0;
  flex-grow: 0;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets {
  text-align: center;
  line-height: 16px;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul {
  list-style: none;
  margin: 0 1em 1em;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul li {
  display: inline-block;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul li button {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
  background-color: var(--tourguide-bullet-color);
  border: 8px solid var(--tourguide-background-color);
  box-sizing: content-box;
  cursor: pointer;
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul li button.complete {
  background-color: var(--tourguide-bullet-visited-color);
}
.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul li button.current {
  background-color: var(--tourguide-bullet-current-color);
}
@media screen and (min-width: 760px) {
  .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner.step-layout-horizontal .guided-tour-step-content-container {
    flex-direction: row;
    height: 100%;
  }
  .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner.step-layout-horizontal .guided-tour-step-content-container .guided-tour-step-content-wrapper {
    flex: 1 1 auto;
  }
  .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner.step-layout-horizontal .guided-tour-step-content-container .guided-tour-step-image {
    width: 50%;
    margin-bottom: calc((1em + 24px) * -1);
    flex: 0 0 auto;
  }
  .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner.step-layout-horizontal .guided-tour-step-content-container .guided-tour-step-image img {
    border-radius: 4px 0 0 4px;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }
}
.guided-tour-step.active .guided-tour-step-tooltip.guided-tour-arrow-none .guided-tour-step-tooltip-inner .guided-tour-arrow {
  display: none;
}`,R={DOM:0,JSON:1,REMOTE:2},Pi={next:"ArrowRight",prev:"ArrowLeft",first:"Home",last:"End",complete:null,stop:"Escape"},Ki={fontFamily:"sans-serif",fontSize:"14px",tooltipWidth:"40vw",overlayColor:"rgba(0, 0, 0, 0.5)",textColor:"#333",accentColor:"#0d6efd",focusColor:"auto",bulletColor:"auto",bulletVisitedColor:"auto",bulletCurrentColor:"auto",stepButtonCloseColor:"auto",stepButtonPrevColor:"auto",stepButtonNextColor:"auto",stepButtonCompleteColor:"auto",backgroundColor:"#fff"};function V(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"keyup";if(K(i)==="object"){var n={type:e};if(typeof t=="number")n.keyCode=t;else if(typeof t=="string")n.key=t;else if(K(t)==="object")n=D(D({},t),{},{type:e});else throw new Error("keyboardNavigation option invalid. should be predefined object or false. Check documentation.");var r=Object.entries(n).map(function(o){var s=$e(o,2),a=s[0],c=s[1];return{key:a,value:c}});return!r.filter(function(o){return i[o.key]!==o.value}).length}return!1}var st=function(){function i(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(rt(this,i),this._options=Object.assign({root:"body",selector:"[data-tour]",animationspeed:120,padding:5,steps:null,src:null,restoreinitialposition:!0,preloadimages:!1,request:{options:{mode:"cors",cache:"no-cache"},headers:{"Content-Type":"application/json"}},keyboardNavigation:Pi,actionHandlers:[],contentDecorators:[],onStart:function(){},onStop:function(){},onComplete:function(){},onStep:function(){},onAction:function(){}},e,{style:$i(Ki,e.colors||e.style)}),this._overlay=null,this._steps=[],this._current=0,this._active=!1,this._stepsSrc=R.DOM,this._ready=!1,this._initialposition=null,K(this._options.steps)==="object"&&Array.isArray(this._options.steps))this._stepsSrc=R.JSON,this._steps=this._options.steps.map(function(n,r){return new Yt(D(D({},n),{},{step:n.step||r}),t)}),this._ready=!0;else if(typeof this._options.src=="string")this._stepsSrc=R.REMOTE,fetch(new Request(this._options.src,this._options.request)).then(function(n){return n.json().then(function(r){t._steps=r.map(function(o,s){return new Yt(D(D({},o),{},{step:o.step||s}),t)}),t._ready=!0})});else if(v(this._options.selector).length>0)this._stepsSrc=R.DOM,this._ready=!0;else throw new Error("Tour is not configured properly. Check documentation.");this._containerElement=document.createElement("aside"),this._containerElement.classList.add("__guided-tour-container"),v(this._options.root).append(this._containerElement),this._shadowRoot=this._containerElement.attachShadow({mode:"closed"}),this._injectIcons(),this._injectStyles(),this.start=this.start.bind(this),this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.go=this.go.bind(this),this.stop=this.stop.bind(this),this.complete=this.complete.bind(this),this._keyboardHandler=this._keyboardHandler.bind(this)}return ot(i,[{key:"currentstep",get:function(){return this._steps[this._current]}},{key:"length",get:function(){return this._steps.length}},{key:"steps",get:function(){return this._steps.map(function(e){return e.toJSON()})}},{key:"hasnext",get:function(){return this.nextstep!==this._current}},{key:"nextstep",get:function(){return M(this._current+1,0,this.length-1)}},{key:"previousstep",get:function(){return M(this._current-1,0)}},{key:"options",get:function(){return this._options}},{key:"_injectIcons",value:function(){v("#GuidedTourIconSet",this._shadowRoot).length===0&&v(this._shadowRoot).append(v(Yn))}},{key:"_injectStyles",value:function(){var e=v("<style>".concat(Vi,"</style>"));v(this._shadowRoot).append(e);var n=v("<style>".concat(ri(this._options.style,"--tourguide"),"</style>"));v(this._shadowRoot).append(n)}},{key:"_keyboardHandler",value:function(e){this._options.keyboardNavigation.next&&V(e,this._options.keyboardNavigation.next)?this.next():this._options.keyboardNavigation.prev&&V(e,this._options.keyboardNavigation.prev)?this.previous():this._options.keyboardNavigation.first&&V(e,this._options.keyboardNavigation.first)?this.go(0):this._options.keyboardNavigation.last&&V(e,this._options.keyboardNavigation.last)?this.go(this._steps.length-1):this._options.keyboardNavigation.stop&&V(e,this._options.keyboardNavigation.stop)?this.stop():this._options.keyboardNavigation.complete&&V(e,this._options.keyboardNavigation.complete)&&this.complete()}},{key:"_decorateText",value:function(e,n){var r=this,o=e;return this._options.contentDecorators.forEach(function(s){s.test(o)&&(o=s.render(o,n,r))}),o}},{key:"init",value:function(){var e=this;if(this.reset(),this._overlay=new Si(this),this._stepsSrc===R.DOM){var n=v(this._options.selector).nodes;this._steps=n.map(function(r){return new Yt(r,e)})}this._steps=this._steps.sort(function(r,o){return r.index-o.index}),this._steps[0].first=!0,this._steps[this.length-1].last=!0}},{key:"reset",value:function(){this._active&&this.stop(),this._stepsSrc===R.DOM&&(this._steps=[]),this._current=0}},{key:"start",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this._ready){if(this._containerElement.style.zIndex=ai()+1,this._options.restoreinitialposition&&(this._initialposition=si(this._options.root)),this._active)this.go(n,"start");else if(v(this._options.root).addClass("__guided-tour-active"),this.init(),this._overlay.attach(this._shadowRoot),this._steps.forEach(function(r){return r.attach(e._shadowRoot)}),this._current=n,this.currentstep.show(),this._active=!0,this._options.onStart(this._options),this._options.keyboardNavigation){if(Object.prototype.toString.call(this._options.keyboardNavigation)!=="[object Object]")throw new Error("keyboardNavigation option invalid. should be predefined object or false. Check documentation.");v(":root").on("keyup",this._keyboardHandler)}}else setTimeout(function(){e.start(n)},50)}},{key:"action",value:function(e,n){if(this._active){switch(n.action){case"next":this.next();break;case"previous":this.previous();break;case"stop":this.stop();break;case"complete":this.complete();break;default:{var r=this._options.actionHandlers.find(function(o){return o.name===n.action});r&&r.onAction(e,n,this)}}typeof this._options.onAction=="function"&&this._options.onAction(e,n,this)}}},{key:"next",value:function(){this._active&&this.go(this.nextstep,"next")}},{key:"previous",value:function(){this._active&&this.go(this.previousstep,"previous")}},{key:"go",value:function(e,n){this._active&&this._current!==e&&(this.currentstep.hide(),this._current=M(e,0,this.length-1),this.currentstep.show(),this._options.onStep(this.currentstep,n))}},{key:"stop",value:function(){this._active&&(this.currentstep.hide(),this._active=!1,this._overlay.remove(),this._steps.forEach(function(e){return e.remove()}),v(this._options.root).removeClass("__guided-tour-active"),this._options.keyboardNavigation&&v(":root").off("keyup",this._keyboardHandler),this._options.restoreinitialposition&&this._initialposition&&oi(this._initialposition,this._options.animationspeed),this._options.onStop(this._options))}},{key:"complete",value:function(){this._active&&(this.stop(),this._options.onComplete())}},{key:"deinit",value:function(){this._ready&&(this._containerElement.remove(),this._containerElement=null,this._active=!1,this._ready=!1)}}]),i}();st.ActionHandler=Di;st.ContentDecorator=Ri;var wt=class extends C{static values={tourId:Number,selector:String,userSgid:String};connect(){this.passesContentSelector()||this.element.remove()}disconnect(){}startTour(){let i={steps:[],onStart:this.onStart.bind(this),onStep:this.onStep.bind(this),onStop:this.onStop.bind(this),onComplete:this.onComplete.bind(this),actionHandlers:this.actionHandlers()},t=JSON.parse(this.element.innerHTML),e={...i,...t};console.log(e),this.tour=new st(e),console.log("starting tour",e),this.tour.start()}onStart(i){this.sendBeacon("start")}onStep(i){this.sendBeacon("step",`${i.index}: ${i.title}`)}onStop(i){this.sendBeacon("stop")}onComplete(i){this.sendBeacon("complete")}actionHandlers(){return[new st.ActionHandler("continueTour",(i,t,e)=>{i.preventDefault(),window.location=t.href})]}passesContentSelector(){return!this.hasSelectorValue||document.querySelector(this.selectorValue)!=null}async sendBeacon(i,t){console.log("sending tracking beacon",i,t);let e="/foo/events",n=JSON.stringify({event:{tour_id:this.tourIdValue,action:i,identifier:t,user_sgid:this.userSgidValue}});debugger;if(!(await Jt(e,{body:n})).ok){console.error("failed");debugger}}};var xt=class extends C{static outlets=["tour"];connect(){this.tourOutlets[0]?.startTour()}};I.register("tour",wt);I.register("tours",xt);})();
//# sourceMappingURL=tour_maven.js.map
